import pandas as pd
import plotly.express as px
import plotly.graph_objects as go

data = pd.read_csv("/home/iiitdmk-sic20/Downloads/IPL_2022.csv")

figure = px.bar(data, x=data["match_winner"], title="Match winners")
figure.show()

data["won_by"] = data["won_by"].map({"Wickets": "Chasing", "Runs": "Runs", "Defending": "Defending"})
won_by = data["won_by"].value_counts()
label = won_by.index
counts = won_by.values
colors = ["orange", "purple"]

figure2 = go.Figure(data=[go.Pie(labels=label, values=counts)])
figure2.update_layout(title="No. of Matches won by chasing or defending")
figure2.update_traces(hoverinfo='label+percent', textinfo='value', marker=dict(colors=colors, line=dict(color='black')))
figure2.show()

toss_decision = data["toss_decision"].value_counts()
label_toss_decision = toss_decision.index
counts_toss_decision = toss_decision.values
colors_toss_decision = ["green", "blue"]

figure3 = go.Figure(data=[go.Pie(labels=label_toss_decision, values=counts_toss_decision)])
figure3.update_layout(title="Toss Decision")
figure3.update_traces(hoverinfo='label+percent', textinfo='value', marker=dict(colors=colors_toss_decision, line=dict(color='black', width=2)))
figure3.show()


figure4 = px.bar(data,
                 x=data["top_scorer"],
                 y=data["highscore"],
                 title="Top Scorer in IPL 2022"
                )
figure4.show()


figure_5 = px.bar(data, x=data["player_of_the_match"], title="Best Bowling of the match")
figure_5.show()

figure6 = px.bar(data, x=data["best_bowling"], title="Best Bowling of the match")
figure6.show()

figure7 = go.Figure()
figure7.add_trace(go.Bar(
    x=data["venue"],
    y=data["first_ings_wkts"],
    name="First innings Wickets",
    marker_color="Green"
))
figure7.add_trace(go.Bar(
    x=data["venue"],
    y=data["second_ings_wkts"],
    name="Second innings Wickets",
    marker_color="Orange"
))

figure7.update_layout(barmode='group', xaxis_tickangle=45)
figure7.show()

figure8 = go.Figure()
figure8.add_trace(go.Bar(
    x=data["venue"],
    y=data["first_ings_wkts"],
    name="First innings Wickets",
    marker_color="Brown"
))
figure8.add_trace(go.Bar(
    x=data["venue"],
    y=data["second_ings_wkts"],
    name="Second innings Wickets",
    marker_color="Aqua"
))

figure8.update_layout(barmode='group', xaxis_tickangle=45)
figure8.show()
